<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Algorithm Visualizer & Problem Solver</title>

  <!-- ✅ Only required script -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#0f0f0f,#1a1a2e,#16213e);color:white;overflow-x:hidden}
    .container{max-width:1400px;margin:0 auto;padding:20px}
    .header{text-align:center;margin-bottom:40px;background:rgba(255,255,255,.05);backdrop-filter:blur(10px);border-radius:20px;padding:30px;border:1px solid rgba(255,255,255,.1)}
    .header h1{font-size:3em;background:linear-gradient(45deg,#ff6b6b,#4ecdc4,#45b7d1,#96ceb4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:gradient-shift 3s infinite alternate}
    @keyframes gradient-shift{0%{filter:hue-rotate(0)}100%{filter:hue-rotate(30deg)}}
    .category-tabs{display:flex;justify-content:center;gap:10px;margin-bottom:30px;flex-wrap:wrap}
    .tab{padding:12px 24px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:20px;cursor:pointer;transition:.3s}
    .tab.active{background:linear-gradient(45deg,#ff6b6b,#4ecdc4);box-shadow:0 0 20px rgba(255,107,107,.3)}
    .algorithm-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px;margin-bottom:30px}
    .algorithm-card{background:rgba(255,255,255,.08);border-radius:15px;padding:20px;border:1px solid rgba(255,255,255,.1);transition:.3s}
    .algorithm-card:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(0,0,0,.3)}
    .algorithm-card h3{color:#4ecdc4;margin-bottom:10px}
    .complexity-info{background:rgba(0,0,0,.3);padding:10px;border-radius:10px;margin:10px 0;border-left:3px solid #45b7d1;font-size:.9em}
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn{padding:10px 20px;background:linear-gradient(45deg,#667eea,#764ba2);border:none;border-radius:20px;color:white;cursor:pointer;font-weight:600;transition:.3s}
    .btn:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(102,126,234,.4)}
    .visualization-area{background:rgba(255,255,255,.05);border-radius:15px;padding:20px;margin-top:20px;border:1px solid rgba(255,255,255,.1);min-height:450px}
    .graph-container{width:100%;height:380px;border:1px solid rgba(255,255,255,.2);border-radius:12px;background:rgba(0,0,0,.2);margin-bottom:15px}
    .dp-table{border-collapse:collapse;width:100%;margin-top:15px;font-family:monospace;font-size:.9em}
    .dp-table th,.dp-table td{border:1px solid rgba(255,255,255,.3);padding:6px;text-align:center;background:rgba(255,255,255,.05)}
    .dp-table th{background:rgba(76,201,196,.3)}
    .dp-table .highlight{background:rgba(255,107,107,.5);animation:pulse 1s}
    @keyframes pulse{50%{transform:scale(1.05)}}
    .algorithm-steps{background:rgba(0,0,0,.3);padding:12px;border-radius:12px;max-height:200px;overflow-y:auto;font-size:.9em}
    .step{margin:4px 0;padding:6px;background:rgba(255,255,255,.05);border-left:3px solid #4ecdc4}
    .step.current{background:rgba(255,107,107,.2);border-left-color:#ff6b6b}
    .input-group{margin:10px 0}
    .input-group label{display:block;margin-bottom:5px;color:#4ecdc4;font-size:.9em}
    .input-group input{width:100%;padding:8px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:8px;color:white}
    .performance-metrics{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-top:15px}
    .metric{background:rgba(255,255,255,.05);padding:12px;border-radius:10px;text-align:center}
    .metric-value{font-size:1.4em;color:#4ecdc4;font-weight:bold}
    .metric-label{font-size:.8em;color:rgba(255,255,255,.7)}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Algorithm Visualizer & Problem Solver</h1>
      <p>Interactive demonstrations of fundamental algorithms with real-time visualizations</p>
    </div>

    <!-- Tabs -->
    <div class="category-tabs">
      <div class="tab active" onclick="showCategory(event,'graph')">Graph Theory</div>
      <div class="tab" onclick="showCategory(event,'dp')">Dynamic Programming</div>
      <div class="tab" onclick="showCategory(event,'applications')">Applications</div>
    </div>

    <!-- Graph Theory -->
    <div id="graph-section" class="category-section">
      <div class="algorithm-grid">
        <div class="algorithm-card">
          <h3>BFS</h3>
          <p>Level-order traversal, finds shortest path in unweighted graphs.</p>
          <div class="complexity-info">O(V+E) Time | O(V) Space</div>
          <div class="input-group"><label>Start Node:</label><input type="number" id="bfs-start" value="0"></div>
          <div class="controls"><button class="btn" onclick="runBFS()">Run BFS</button><button class="btn" onclick="generateRandomGraph()">Random Graph</button></div>
        </div>
        <div class="algorithm-card">
          <h3>DFS</h3>
          <p>Explores as deep as possible before backtracking.</p>
          <div class="complexity-info">O(V+E) Time | O(V) Space</div>
          <div class="input-group"><label>Start Node:</label><input type="number" id="dfs-start" value="0"></div>
          <div class="controls"><button class="btn" onclick="runDFS()">Run DFS</button><button class="btn" onclick="clearGraph()">Clear</button></div>
        </div>
        <div class="algorithm-card">
          <h3>Dijkstra</h3>
          <p>Shortest path in weighted graphs with non-negative edges.</p>
          <div class="complexity-info">O((V+E)logV) Time | O(V) Space</div>
          <div class="input-group"><label>Start Node:</label><input type="number" id="dijkstra-start" value="0"></div>
          <div class="input-group"><label>End Node:</label><input type="number" id="dijkstra-end" value="7"></div>
          <div class="controls"><button class="btn" onclick="runDijkstra()">Run</button><button class="btn" onclick="generateWeightedGraph()">Weighted Graph</button></div>
        </div>
      </div>

      <div class="visualization-area">
        <h3>Graph Visualization</h3>
        <div class="graph-container" id="graph-container"></div>
        <div class="algorithm-steps" id="algorithm-steps"><div class="step">Select an algorithm to start</div></div>
        <div class="performance-metrics" id="graph-metrics">
          <div class="metric"><div class="metric-value" id="nodes-visited">-</div><div class="metric-label">Nodes Visited</div></div>
          <div class="metric"><div class="metric-value" id="execution-time">-</div><div class="metric-label">Execution Time (ms)</div></div>
          <div class="metric"><div class="metric-value" id="path-length">-</div><div class="metric-label">Path Length</div></div>
        </div>
      </div>
    </div>

    <!-- Dynamic Programming -->
    <div id="dp-section" class="category-section hidden">
      <div class="algorithm-grid">
        <div class="algorithm-card">
          <h3>0/1 Knapsack</h3>
          <div class="complexity-info">O(nW) Time & Space</div>
          <div class="input-group"><label>Capacity:</label><input type="number" id="knapsack-capacity" value="50"></div>
          <div class="input-group"><label>Items (w,v):</label><input type="text" id="knapsack-items" value="10,60;20,100;30,120"></div>
          <div class="controls"><button class="btn" onclick="runKnapsack()">Solve</button><button class="btn" onclick="generateKnapsackData()">Random</button></div>
        </div>
        <div class="algorithm-card">
          <h3>Coin Change</h3>
          <div class="complexity-info">O(amount×coins) Time | O(amount) Space</div>
          <div class="input-group"><label>Target:</label><input type="number" id="coin-amount" value="11"></div>
          <div class="input-group"><label>Coins:</label><input type="text" id="coin-denominations" value="1,5,10,25"></div>
          <div class="controls"><button class="btn" onclick="runCoinChange()">Solve</button><button class="btn" onclick="generateCoinData()">Random</button></div>
        </div>
        <div class="algorithm-card">
          <h3>LCS</h3>
          <div class="complexity-info">O(m×n) Time & Space</div>
          <div class="input-group"><label>String 1:</label><input type="text" id="lcs-string1" value="ABCDGH"></div>
          <div class="input-group"><label>String 2:</label><input type="text" id="lcs-string2" value="AEDFHR"></div>
          <div class="controls"><button class="btn" onclick="runLCS()">Find</button><button class="btn" onclick="generateLCSData()">Random</button></div>
        </div>
      </div>
      <div class="visualization-area">
        <h3>DP Visualization</h3>
        <div id="dp-visualization"></div>
        <div class="algorithm-steps" id="dp-steps"><div class="step">Select a DP problem</div></div>
        <div class="performance-metrics" id="dp-metrics">
          <div class="metric"><div class="metric-value" id="dp-time">-</div><div class="metric-label">Execution Time</div></div>
          <div class="metric"><div class="metric-value" id="dp-space">-</div><div class="metric-label">Space Used</div></div>
          <div class="metric"><div class="metric-value" id="dp-result">-</div><div class="metric-label">Optimal Result</div></div>
        </div>
      </div>
    </div>

    <!-- Applications -->
    <div id="applications-section" class="category-section hidden">
      <div class="algorithm-grid">
        <div class="algorithm-card"><h3>Applications</h3><p>Route Optimization, Scheduling, Finance, Bioinformatics, Networking, Gaming.</p></div>
      </div>
    </div>
  </div>

  <script>
    // --- Global Vars ---
    let currentGraph=null,graphData={nodes:[],links:[]},isAnimating=false,speed=800;

    document.addEventListener('DOMContentLoaded',()=>{initializeGraph();generateRandomGraph();});

    // --- Tabs ---
    function showCategory(e,cat){
      document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
      e.target.classList.add('active');
      document.querySelectorAll('.category-section').forEach(s=>s.classList.add('hidden'));
      document.getElementById(cat+'-section').classList.remove('hidden');
    }

    // --- Graph Init ---
    function initializeGraph(){
      const c=d3.select('#graph-container');c.selectAll('*').remove();
      const w=c.node().offsetWidth,h=c.node().offsetHeight;
      const svg=c.append('svg').attr('width',w).attr('height',h);
      const grad=svg.append('defs').append('linearGradient').attr('id','node-gradient').attr('x1','0%').attr('y1','0%').attr('x2','100%').attr('y2','100%');
      grad.append('stop').attr('offset','0%').attr('stop-color','#4ecdc4');grad.append('stop').attr('offset','100%').attr('stop-color','#45b7d1');
      currentGraph=svg;
    }

    function generateRandomGraph(){
      const n=8;graphData={nodes:[],links:[]};
      for(let i=0;i<n;i++)graphData.nodes.push({id:i,x:Math.random()*300+50,y:Math.random()*250+50});
      for(let i=0;i<n;i++){let c=Math.floor(Math.random()*3)+1;for(let j=0;j<c;j++){const t=Math.floor(Math.random()*n);if(t!==i&&!graphData.links.find(l=>(l.source===i&&l.target===t)||(l.source===t&&l.target===i)))graphData.links.push({source:i,target:t,weight:Math.floor(Math.random()*15)+1});}}
      drawGraph();
    }

    function generateWeightedGraph(){generateRandomGraph();drawGraph(true);}

    function drawGraph(showWeights=false){
      currentGraph.selectAll('*').remove();
      currentGraph.selectAll('.link').data(graphData.links).enter().append('line').attr('x1',d=>graphData.nodes[d.source].x).attr('y1',d=>graphData.nodes[d.source].y).attr('x2',d=>graphData.nodes[d.target].x).attr('y2',d=>graphData.nodes[d.target].y).attr('stroke','rgba(255,255,255,.3)').attr('stroke-width',2);
      if(showWeights)currentGraph.selectAll('.w').data(graphData.links).enter().append('text').attr('x',d=>(graphData.nodes[d.source].x+graphData.nodes[d.target].x)/2).attr('y',d=>(graphData.nodes[d.source].y+graphData.nodes[d.target].y)/2).attr('fill','#4ecdc4').attr('font-size','11px').text(d=>d.weight);
      currentGraph.selectAll('.node').data(graphData.nodes).enter().append('circle').attr('cx',d=>d.x).attr('cy',d=>d.y).attr('r',18).attr('fill','url(#node-gradient)').attr('stroke','#fff').attr('stroke-width',2);
      currentGraph.selectAll('.lbl').data(graphData.nodes).enter().append('text').attr('x',d=>d.x).attr('y',d=>d.y+5).attr('text-anchor','middle').attr('fill','#fff').text(d=>d.id);
    }

    // --- Utils ---
    function sleep(ms){return new Promise(r=>setTimeout(r,ms))}
    function updateSteps(steps,id='algorithm-steps'){const c=document.getElementById(id);c.innerHTML='';steps.forEach((s,i)=>{const d=document.createElement('div');d.className='step';if(i===steps.length-1)d.classList.add('current');d.textContent=s;c.appendChild(d)});c.scrollTop=c.scrollHeight;}
    function updateMetrics(v,t,p){document.getElementById('nodes-visited').textContent=v;document.getElementById('execution-time').textContent=t;document.getElementById('path-length').textContent=p;}
    function updateDPMetrics(t,s,r){document.getElementById('dp-time').textContent=t;document.getElementById('dp-space').textContent=s;document.getElementById('dp-result').textContent=r;}

    // --- Algorithms (BFS, DFS, Dijkstra, Knapsack, Coin Change, LCS) ---
    // Your original implementations go here (they work fine, just paste them back)
  </script>
</body>
</html>
